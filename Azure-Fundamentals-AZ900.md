# AZ900 Azure Fundamentals

## Cloud Concepts
- On-demand / Self-service
- Can access anywhere in the world
- Rapid elasticity
- Only Pay for what you use (resource based/time based)
- Benefits if using Cloud Services
    - High Availability
        - ability of system to respond to users (% of time)
    - Scalability
        - abilty of system/website to handle grown of users/demand/requests
    - Elasticity
        - ability to automatically grow/shrink resources based on demand
    - Agility
        - ability to respond to changes in the market or environment
        - can test things cheaply/experiment
    - Fault Tolerance
        - abiltiy of a system to handle faults like power, networking or hardware failures
    - Disaster Recovery
        - ability of a system toi recover from a failure within a period of time, and how much data is lost
    - Econonmy of Scale
        - Since Azure owns and runs so much hardware, they can do so more efficiently, and pass on the savings to the customer
    - CapEx vs. OpEx
        - CapEx is money invested (upfront) in assets (like computers or other hardware) that return investment over time
            - Value reduces over time
        - OpEx is the cost of doing business on daily bases, ongoing expenses
            - As needed spend
            - immediate billing
            - deduct expence from tax bill in same year (no depreciation)
    - Global Reach 
        - can use resources in various regions around the world
    - Customer latency capabilities
        - Can deploy applications closer to users, reduces latency
    - Security
        - Majority of security rquirements are managed by vendor instead of customer 
    - Consumption-based model
        - Pay per time used (minute, hour)
        - Pay for resources used (size, number)
        - Can predict costs

- Paradigms for hosting apps
    - On-Premises (Manage)
        - Manage everything, include networking, compute resources purchase and powering
    - IaaS (Host)
        - Infrastructure such as VMs, networking, LBs, firewalls that you can get in a Cloud environment
    - PaaS (Develop)
        - Provider runs your application, don't have access to hardware, but you provide the software/code
    - SaaS (Consume)
        - Software available to use within the cloud, only configuration access only
        - Subscription based cost
![Compare paradigms](https://stack247.files.wordpress.com/2015/05/azure-on-premises-vs-iaas-vs-paas-vs-saas.png)
    
- Cloud Types
    - Public
        - Computing services offered over the public internet
        - anyone can sign up
        - publicly accessible
        - Personal users, organisations
    - Private
        - Computing services offered to only select users
        - internal or corporate cloud
        - can be hosted on own or leased hardware
        - "Cloud" means the self-service access to resources
        - Still need to purchase infrastructure
        - need skills to manage the DC as well as the cloud
    - Hybrid
        - Combination of public and private clouds
        - scale private infrastructure to the cloud
        - Greatest flexibility - can keep difficult to migrate apps on-prem, new or modern apps to cloud

## Azure Architecture
- Regions
    - collection of DCs
    - Some service regionally independent
    - 58 regions
    ![Azure Regions](https://azurecomcdn.azureedge.net/cvt-92799112b92ce1432ee2e938fe2233012be6a469ece7c4743b538ebd039395e4/images/shared/regions-map-large.svg)
    - Region Pairs 
        - A region that is linked with another region in the same geography (at least 300 miles apart)
        - Some services can replicate
        - Patch/update one region at a time
        - Can failover from one region to the other when there's an outage
- Availability Sets
    - Separate Domains in the AZ to ensure things like hardware failures or patches don't take out the whole AZ at once
    - Update Domains
        - digital level domains 
    - Fault Domains
        - physical level domain
- Availability Zones
    - Datacentre, separated by distance
    - 3 AZs per Region
    - Allows for maximum amount of availability
    - Not available in all regions
- Availability options:
    - Single VM (SLA 99.9%)
    - Availability Set (SLA 99.95%)
    - Availabilty Zones (SLA 99.99%)
    - Region Pairs (Full DR)
- Resource Groups
    - Way of organisiging resources
    - Can perform operations on resource groups
    - Container for resources
    - Resources can only be in one RG
    - Can secure at RG level, using RBAC
- Geographies
    -  discrete market typically containing two or more regions that preserves data residency and compliance boundaries

    ![Resource Hierachy](https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-setup-guide/media/organize-resources/scope-levels.png)
- Azure Resource Manager
    - Model of deployments
    - API layer for functionality provisioning and configuring ALL services/features/resources
    - Can use ARM templates to build stacks consistently multiple times
- Benefits / Usage of core Azure architectural components
    - Put resources close to users

## Compute
- Virtual Machines
    - Not a real machine, normally part of a real machine using virtualisation software to appear as a single/individual machine
    - Is your machine to install/control
    - IaaS - including networking
    - Tooling to manage VMs
    - Bluepirnts
        - Used to configure the entire stack of resources to be used
    - Azure recommendations
    - Many different OS types
    - Pricing
        - hourly
        - More compute/memory, more cost
    - Windows or Linux
    - Hypervisor run on host machine, allows VM to run on part of a machine
- Scale Sets
    - Group of identical, load balanced VMs
    - Controlled by a scaling policy, e.g. when CPU is > X%, add another VMs or scheduled
    - Way of ensuring High Availability, if a machine stops, app keeps working
    - Can manage multiple (identical) VMs easily w/ the same config
    - Auto scaling, run what you need, up or down
    - Elasticity - add/remove machines
- App Service
    - Upload code / software, Azure will provision required hardware and run it for us as a web service
    - no need to provision infrastructure
    - PaaS
- Functions
    - serverless
    - Can edit in browser
    - meant for small pieces of execution
    - 1M executions free
    - upload code, no configuration of software needed
- Azure Container Instances 
    - fast/easy way to deploy containers
    - containers
        - package entire software environment into container
    - reduce overheads on promoting software/changes through environments
    - ACI 
        - quickest way to get a container created (under a minute)
        - Not great scalability
- Azure Kubernetes Service
    - like ACI, but has ability to scale
    - based on Google's Kubernetes

## Networking
- Virtual Network (VNet)
    - Network to connect resources (VMs, functions, etc.) to to use them/connect to other services
    - done via software
- Load Balancers
    - Network LB
        - Can be used for any traffic (internal or external)
        - traffic controlled via some defined (user or default) algorithm
- VPN Gateway
    - create private link between own network and virtual network
    - requires connection on both sides
    - provided by Azure
    - blocks public traffic
- Application Gateway
    - Load balancer that operates at http request level (application LB)
    - Can direct traffic based on URL, query params, http headers, etc.
- Content Delivery Network
    - servers not controlled by us
    - serves content (static files) to users at Edge locations, generally closer to users than the origin
    - removes traffic from origin(s)

## Storage
- Blob
    - used for storing large amount of unstructured data
- Disk
    - allows data to be stored persistently and attached as a virtual hard disk
    - can mount them to a VM
- File
    - uses SMB protocol
    - allows multiple VMs to R/W the files
- Archive
    - Cold, infrequently accessed data, cheap storage, slow/expensive access
    - normally for recovery

## Database
- CosmosDB
    - NoSQL database
    - Globally availably
    - Very fast 
    - PaaS DB offering
- Azure SQL DB
    - PaaS DB offering
    - Managed service
    - Scales easily
    - Relational DB
- Azure DB for MySQL
    - Managed version of MySQL (open source DB)
- Azure DB for PostgreSQL
    - Managed version of PostgreSQL (open source DB)
    - MySQL compatible
- Azure DB Migration service
    - Service to help migrate existing DB (on prem, other cloud) to Azure

## Marketplace
- Service where external vendors can sell their Azure products and solutions
- Simple catalog based portal

## Azure Solutions
- IoT
    - IoT Central 
        - a SaaS solution that can help ease the costs and effort of developing a whole IoT solution from scratch.
    - IoT Hub 
        - provides a managed and secure backend for millions of IoT devices.
        - Supports Millions of records per seconds
- Big Data / Analytics
    - Synapse Analytics (formerly SQL Data Warehouse) 
        - Reporting service, large reports/data store
    - HDInsight
        - Hadoop managaged service by Azure
    - Azure Databricks
        - Centalised service to pull in data from many services, perform transfromations, create reports
- Artificial Intelligence
    - Machine Learning service
        - Vision API, Speech API, etc.
        - an ML model defines what you want your machine learning implementation to learn
    - Machine Learning Studio
- Serverless
    - Azure Functions
        - upload code to be run, no server configuration needed
        - performance guaranteed
    - Logic Apps
        - tie functions together
    - Event Grid
- DevOps
    - Azure Devops
    - Azure DevTest Labs
- Benefits/Outcomes of using Azure solutions
- Tools
    - Azure Portal
        - Manually configure using click configurations
    - Azure PowerShell
        - Use the SDK for Powershell to connect to Azure from PS to perform management tasks
    - Azure CLI
        - based on bash, mainly for Linux, connect to Azure
    - Cloud Shell
        - Can run CLI or Powershell in the browser from the portal
- Azure Adviser
    - Analyses your use of resources using AI/ML
    - Offer recommendations on:
        - High Availability
        - Security
        - Performance
        - Cost

## Security
- Network Security Groups
    - Series of rule that allow inbound or outbound traffic
    - e.g. block all traffic except on a particular IP range
    - Enabled at a subnet level
- Application Security Groups
    - Can apply resource based rules (e.g. All VMs, all SQL Servers etc.)
- User Defined Routes
    - Specify an exact path that some traffic needs to travel over your network
    - e.g. force all internet traffic via a firewall device, or for to ensure all outbound traffic goes via a corporate network before going out to the internet
- Azure Firewall
    - Analyse traffic being directed to it, and either reject or allow it based on a pattern
    - Web Application Firewall
        - Can recognise patterns at http level, look for common attack signature such as XSS, SQL injection and reject, otherwise load balance
- Azure DDoS Protection
    - Basic
        - Monitoring
        - Mitigation for L3/L4 attacks
        - L7 protection with Gateway WAF
        - Globally deployed
    - Standard
        - Basic features +
        - tuned policies in our Virtual Network
        - Logging/Alerting & Telemetry
        - Resource cost scale protection
- Security Solution appropriateness
    - All virtual network subnets should use NSGs
        - make the rules fairly tight
        - i.e. lock the doors that are never used
    - DDoS only use as needed or after attacked, cost can be prohibative
    - Application Gateway with WAF
        - Mainly useful for high traffic enterprise applications
    - Security through layers
        - ensure multiple layers of security exists in case of single layer breaches
        - Data - i.e. virtual network enpoint - restrict access to data to a particular VNet
        - Application - i.e. API Management
        - Compute - i.e. Limit Remote Desktop access, Windows Update
        - Network - i.e. NSG, use subnets, deny by default
        - Perimeter - i.e. DDoD, firewalls
        - Identity & access - i.e. Azure AD
        - Physical - i.e. Door locks and key cards
    - Use Azure AD instead of building your own, SaaS vs. IaaS
    - Use MFA, more secure
- Security Tools
    - Physical vs. Digital
        - Physical - computer logged into application, no access to Azure DCs
        - Security responsibility maps to shared responsibility architecture
    - Azure Security Center
    - Azure Security Center usage scenarios
    - Key Vault
        - All secrets in Azure should be managed in Azure Key Vault
    - Azure Information Protection (AIP)
    - Azure Advanced Threat Protection (ATP)

## Identity Services
- Authentication and Authorization
    - Authentication is a user proving who they are, user ID and password
    - Authorisation is ensuring a user is permitted to perform an action
    - Least Priviliges - Enasure minimum user granted as are needed
- Azure Active Directory
    - Designed for web technologies primarily
    - Identity as a Service - IDaaS
    - MS's preferred solution for ID managment
    - Mange users/groups/roles
    - Enables SSO - use company username/password to allow access to all applications
    - Can synchronise with the corporate AD, allow users/passwords to be used in the AAD
    - Not the same as MS Active Directory
- Azure Multi-Factor Authentication
    - Users are forced to use a second method of authentication
    - E.g. Username/Password/Mobile
    - Made of:
        - Something you are (voice, face, thumbprint)
        - Something you know (username, password, secret question)
        - Something you have (phone, app, ATM card)

## Governance
- policies and initiatives with Azure Policy
- Role-Based Access Control (RBAC)
    - Recommended authentication mechanism
    - Used to grant access to Azure, rather than granting access to users directly, assign/remove users from role
- Locks
- Azure Advisor security assistance
- Azure Blueprints

## Monitoring & Reporting
- Azure Monitor
- Azure Service Health
- Use cases and benefits of Azure Monitor and Azure Service Health

## Privacy, Compliance and Trust
- Compliance 
    - GDPR
    - ISO
    - NIST
- Microsoft Privacy Statement
- Trust center
- Service Trust Portal
- Compliance Manager
- Azure Compliance
- Azure Government
- Azure China

## Pricing
- Subscriptions
    - access control boundaries
    - billing boundaries
    - offer types
    - Management groups
        - Groups of Subscriptions (or further management groups)
        - MGs not mandatory, subscriptions are
        - Way of simplifying organisational structure
    - Accounts can have multiple subscriptions, or one subscriptions
    - Can have subscriptions for departments (i.e. Finance, Marketing), or environment (Dev, Prod)
- Cost management
    - Purchase options
    - Azure Free account
    - resource types, services, locations, ingress/egress traffic
    - Zones for billing purposes
    - Pricing calculator
    - Total Cost of Ownership (TCO) calculator
    - Cost Minimisation best practices
        - performing cost analysis
        - spending limits 
        - quotas
        - using tags to identify cost owners, 
        - Azure reservations 
        - Azure Advisor
    - Azure Cost Management

## Support
- Levels
    - Basic
    - Developer
        - For trial and non-production environments
    - Standard
    - Professional Direct 
        - Max 2 hour response time for Cat B incidents
    - Premier
        - Fastest response time
- Support Tickets
- Support Channels
- Knowledge Centre
- Service Level Agreements (SLA)
    - Composite SLAs
    - determine appropriate SLA for an app
- Service Lifecycle
    - Previews
        - Private
        - Public
    - General Availability
    - Monitor feature/service updates 

## Exam Preparation
- https://learn.acloud.guru/course/az-900-microsoft-azure-fundamentals
- https://www.udemy.com/course/az900-azure/
- https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RE3VwUY
